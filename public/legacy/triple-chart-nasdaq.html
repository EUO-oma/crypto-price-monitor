<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BTC/ETH/NASDAQ Triple Chart Viewer</title>
    
    <!-- íŒŒë¹„ì½˜ ë° ë©”íƒ€ íƒœê·¸ -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <meta name="theme-color" content="#000000">
    <style>
        :root {
            --chart-height: 400px;  /* ê¸°ë³¸ ì°¨íŠ¸ ë†’ì´ */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #000000;
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .footer {
            background: #0a0a0a;
            padding: 15px 20px;
            border-top: 1px solid #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .title {
            font-size: 1.5em;
            font-weight: bold;
            background: linear-gradient(90deg, #f7931a 0%, #627eea 50%, #0066FF 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .back-btn {
            padding: 8px 16px;
            background: #1a1a1a;
            color: #aaa;
            border: 1px solid #333;
            border-radius: 5px;
            text-decoration: none;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: #2a2a2a;
            color: #fff;
        }

        .charts-container {
            width: 100%;
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 0;
            margin: 0;
        }

        /* ë ˆì´ì•„ì›ƒ 1: ì„¸ë¡œ 3ë¶„í•  (ê¸°ë³¸) */
        .layout-1 .charts-container {
            flex-direction: column;
        }

        .layout-1 .chart-wrapper {
            width: 100%;
            /* heightëŠ” JavaScriptì—ì„œ ë™ì ìœ¼ë¡œ ì„¤ì • */
            overflow: hidden;
            position: relative;
            margin: 0;
            padding: 0;
        }

        /* PCì—ì„œëŠ” ê°€ë³€ ë†’ì´ */
        @media (min-width: 769px) {
            .layout-1 .chart-wrapper {
                height: var(--chart-height);
            }
        }

        /* ë ˆì´ì•„ì›ƒ 2: 2ê°œ ì°¨íŠ¸ ì¢Œìš° ë¶„í•  (PCë§Œ) */
        @media (min-width: 769px) {
            .layout-2 .charts-container {
                flex-direction: row;
                height: var(--chart-height);
            }

            .layout-2 .chart-wrapper {
                width: 50%;
                height: var(--chart-height);
            }

            .layout-2 .chart-wrapper:nth-child(3) {
                display: none;  /* ì„¸ ë²ˆì§¸ ì°¨íŠ¸ ìˆ¨ê¹€ */
            }

            .layout-2 .chart-wrapper:not(:last-child) {
                border-right: 1px solid #222;
                border-bottom: none;
            }
        }

        /* ë ˆì´ì•„ì›ƒ 3: 3ê°œ ì°¨íŠ¸ ê°€ë¡œ ë¶„í•  (PCë§Œ) */
        @media (min-width: 769px) {
            .layout-3 .charts-container {
                flex-direction: row;
                height: var(--chart-height);
            }

            .layout-3 .chart-wrapper {
                width: 33.33%;
                height: var(--chart-height);
            }

            .layout-3 .chart-wrapper:not(:last-child) {
                border-right: 1px solid #222;
                border-bottom: none;
            }
        }

        .chart-wrapper {
            width: 100%;
            /* ê¸°ë³¸ ë†’ì´ëŠ” JavaScriptì—ì„œ ì„¤ì • */
            overflow: hidden;
            position: relative;
            margin: 0;
            padding: 0;
        }

        /* PCì—ì„œëŠ” ê°€ë³€ ë†’ì´ */
        @media (min-width: 769px) {
            .chart-wrapper {
                height: var(--chart-height);
            }
        }

        #btc-chart, #eth-chart, #sol-chart {
            width: 100%;
            height: 100%;
        }

        .chart-wrapper:not(:last-child) {
            border-bottom: 1px solid #222;
        }

        /* ë ˆì´ì•„ì›ƒ ë²„íŠ¼ ë° ë†’ì´ ì¡°ì ˆ */
        .layout-controls {
            display: none;  /* ëª¨ë°”ì¼ì—ì„œëŠ” ìˆ¨ê¹€ */
            gap: 20px;
            align-items: center;
            margin-left: auto;
            margin-right: 20px;
        }

        .layout-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .height-controls {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        @media (min-width: 769px) {
            .layout-controls {
                display: flex;
            }
        }

        .layout-btn {
            width: 30px;
            height: 30px;
            border: 1px solid #333;
            background: #1a1a1a;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            border-radius: 5px;
        }

        .layout-btn:hover {
            background: #2a2a2a;
            color: #fff;
        }

        .layout-btn.active {
            background: #f7931a;
            color: #000;
            border-color: #f7931a;
        }

        .height-input {
            width: 60px;
            padding: 5px;
            background: #1a1a1a;
            border: 1px solid #333;
            color: #fff;
            text-align: center;
            border-radius: 3px;
        }

        .height-btn {
            width: 25px;
            height: 25px;
            border: 1px solid #333;
            background: #1a1a1a;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .height-btn:hover {
            background: #2a2a2a;
            color: #fff;
        }

        /* ëª¨ë°”ì¼ ëŒ€ì‘ */
        @media (max-width: 768px) {
            .title {
                font-size: 1.2em;
            }

            .charts-container {
                flex: 1;
            }

            .chart-wrapper {
                /* ëª¨ë°”ì¼ ë†’ì´ë„ ìœ ì§€ */
                height: 33.33%;
            }
        }
    </style>
</head>
<body class="layout-1">
    <div class="charts-container">
        <!-- ë¹„íŠ¸ì½”ì¸ ì°¨íŠ¸ -->
        <div class="chart-wrapper">
            <div id="btc-chart"></div>
        </div>

        <!-- ì´ë”ë¦¬ì›€ ì°¨íŠ¸ -->
        <div class="chart-wrapper">
            <div id="eth-chart"></div>
        </div>

        <!-- ì†”ë¼ë‚˜ ì°¨íŠ¸ -->
        <div class="chart-wrapper">
            <div id="sol-chart"></div>
        </div>
    </div>

    <div class="footer">
        <div class="title">BTC / ETH / SOL Triple Chart</div>
        <div class="legend" style="display: flex; gap: 20px; align-items: center;">
            <span style="display: flex; align-items: center; gap: 5px;">
                <span style="display: inline-block; width: 15px; height: 15px; background: #f7931a;"></span>
                <span style="color: #aaa;">BTC</span>
            </span>
            <span style="display: flex; align-items: center; gap: 5px;">
                <span style="display: inline-block; width: 15px; height: 15px; background: #627eea;"></span>
                <span style="color: #aaa;">ETH</span>
            </span>
            <span style="display: flex; align-items: center; gap: 5px;">
                <span style="display: inline-block; width: 15px; height: 15px; background: #00FFA3;"></span>
                <span style="color: #aaa;">SOL</span>
            </span>
        </div>
        <div class="layout-controls">
            <div class="height-controls">
                <input type="number" id="heightInput" class="height-input" value="400" min="200" max="800">
                <span style="color: #666; font-size: 12px;">px</span>
                <button class="height-btn" onclick="adjustHeight(-10)">-</button>
                <button class="height-btn" onclick="adjustHeight(10)">+</button>
            </div>
            <div class="layout-buttons">
                <button class="layout-btn active" onclick="changeLayout(1)">1</button>
                <button class="layout-btn" onclick="changeLayout(2)">2</button>
                <button class="layout-btn" onclick="changeLayout(3)">3</button>
            </div>
        </div>
        <a href="index.html" class="back-btn">â† ëŒì•„ê°€ê¸°</a>
    </div>

    <!-- TradingView Widget -->
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script type="text/javascript">
        // ë¡œë“œëœ ì°¨íŠ¸ ìˆ˜ ì¶”ì 
        let chartsLoaded = 0;
        const totalCharts = 3;
        
        // ëª¨ë“  ì°¨íŠ¸ê°€ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
        function onChartReady() {
            chartsLoaded++;
            console.log(`ì°¨íŠ¸ ${chartsLoaded}/${totalCharts} ë¡œë“œ ì™„ë£Œ`);
            
            if (chartsLoaded === totalCharts) {
                console.log('âœ… ëª¨ë“  ì°¨íŠ¸ ë¡œë“œ ì™„ë£Œ!');
                // ëª¨ë“  ì°¨íŠ¸ê°€ ë¡œë“œëœ í›„ ì‹¤í–‰í•  ì‘ì—…
                enablePageInteractions();
            }
        }
        
        // í˜ì´ì§€ ìƒí˜¸ì‘ìš© í™œì„±í™”
        function enablePageInteractions() {
            // ë ˆì´ì•„ì›ƒ ë³€ê²½ ë²„íŠ¼ í™œì„±í™”
            document.querySelectorAll('.layout-btn').forEach(btn => {
                btn.style.pointerEvents = 'auto';
                btn.style.opacity = '1';
            });
            
            // ë†’ì´ ì¡°ì ˆ ì»¨íŠ¸ë¡¤ í™œì„±í™”
            const heightInput = document.getElementById('heightInput');
            const heightButtons = document.querySelectorAll('.height-btn');
            if (heightInput) {
                heightInput.disabled = false;
            }
            heightButtons.forEach(btn => {
                btn.disabled = false;
            });
            
            // ë¦¬ì‚¬ì´ì¦ˆ ì´ë²¤íŠ¸ í™œì„±í™”
            allowResize = true;
            console.log('âœ… ë¦¬ì‚¬ì´ì¦ˆ ì´ë²¤íŠ¸ í™œì„±í™”');
        }
        
        // ì°¨íŠ¸ ì„¤ì • í•¨ìˆ˜
        function createChart(containerId, symbol, color) {
            // ì»¨í…Œì´ë„ˆì˜ ì‹¤ì œ ë†’ì´ ê°€ì ¸ì˜¤ê¸°
            const container = document.getElementById(containerId);
            const containerWrapper = container.parentElement;
            const actualHeight = containerWrapper ? containerWrapper.offsetHeight : Math.floor(window.innerHeight / 3);

            return new TradingView.widget({
                    "width": "100%",
                    "height": actualHeight,  // í”½ì…€ê°’ìœ¼ë¡œ ëª…ì‹œì  ì§€ì •
                    "symbol": symbol.includes(':') ? symbol : `BINANCE:${symbol}`,
                    "interval": "1",  // 1ë¶„ë´‰ (ì‹¤ì‹œê°„ í‹± ë°ì´í„° ìë™ ì—…ë°ì´íŠ¸)
                    "timezone": "Asia/Seoul",
                    "theme": "dark",
                    "style": "1",  // Candlestick
                    "locale": "kr",
                    "toolbar_bg": "#f1f3f6",
                    "enable_publishing": false,
                    "withdateranges": true,
                    "allow_symbol_change": false,
                    "save_image": false,
                    "container_id": containerId,
                    "hide_side_toolbar": true,
                    "hide_drawing_toolbar": true,
                    "hide_top_toolbar": false,
                    "hide_legend": true,
                    "hide_volume": true,  // ë³¼ë¥¨ ì œê±°
                    "withdateranges": false,
                    "details": false,
                    "show_popup_button": false,
                    "studies": [],  // ë³´ì¡°ì§€í‘œ ì—†ìŒ
                    "overrides": {
                        "mainSeriesProperties.candleStyle.upColor": color,
                        "mainSeriesProperties.candleStyle.downColor": "#666",
                        "mainSeriesProperties.candleStyle.borderUpColor": color,
                        "mainSeriesProperties.candleStyle.borderDownColor": "#666",
                        "mainSeriesProperties.candleStyle.wickUpColor": color,
                        "mainSeriesProperties.candleStyle.wickDownColor": "#666"
                    }
                });
        }

        // ëª¨ë°”ì¼ ë””ë°”ì´ìŠ¤ ê°ì§€
        function isMobileDevice() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || 
                   window.innerWidth < 768;
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì°¨íŠ¸ ìƒì„±
        window.addEventListener('DOMContentLoaded', function() {
            // ì´ˆê¸°ì— ë²„íŠ¼ë“¤ ë¹„í™œì„±í™”
            document.querySelectorAll('.layout-btn').forEach(btn => {
                btn.style.pointerEvents = 'none';
                btn.style.opacity = '0.5';
            });
            const heightInput = document.getElementById('heightInput');
            const heightButtons = document.querySelectorAll('.height-btn');
            if (heightInput) {
                heightInput.disabled = true;
            }
            heightButtons.forEach(btn => {
                btn.disabled = true;
            });
            
            // ëª¨ë°”ì¼ì—ì„œëŠ” ì°¨íŠ¸ ë¡œë”© ë”œë ˆì´ ì¦ê°€
            const loadDelay = isMobileDevice() ? 500 : 200;
            const chartDelay = isMobileDevice() ? 2000 : 1500;
            
            // í˜„ì¬ ë ˆì´ì•„ì›ƒ í™•ì¸
            const currentLayout = document.body.className;

            if (currentLayout === 'layout-1') {
                // ë ˆì´ì•„ì›ƒ 1ì€ ìë™ ê³„ì‚°
                const autoHeight = Math.floor(window.innerHeight / 3);
                document.getElementById('heightInput').value = autoHeight;

                // ì°¨íŠ¸ wrapperì™€ ì°¨íŠ¸ div ëª¨ë‘ì— ë†’ì´ ê°•ì œ ì ìš©
                document.querySelectorAll('.chart-wrapper').forEach(wrapper => {
                    wrapper.style.height = autoHeight + 'px';
                    wrapper.style.minHeight = autoHeight + 'px';
                });
                document.querySelectorAll('#btc-chart, #eth-chart, #sol-chart').forEach(chart => {
                    chart.style.height = '100%';
                    chart.style.minHeight = autoHeight + 'px';
                });

                applyChartHeight(autoHeight);
            } else {
                // ë ˆì´ì•„ì›ƒ 2, 3ì€ ì €ì¥ëœ ë†’ì´ê°’ ì‚¬ìš©
                const savedHeight = localStorage.getItem('chartHeight') || '400';
                document.getElementById('heightInput').value = savedHeight;
                applyChartHeight(parseInt(savedHeight));
            }

            // ì°¨íŠ¸ divì— ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ë¡œ ë†’ì´ ê°•ì œ ì„¤ì •
            const chartHeight = currentLayout === 'layout-1' ?
                Math.floor(window.innerHeight / 3) :
                parseInt(document.getElementById('heightInput').value);

            const chartDivs = ['btc-chart', 'eth-chart', 'sol-chart'];
            chartDivs.forEach(id => {
                const div = document.getElementById(id);
                if (div) {
                    div.style.height = chartHeight + 'px';
                    div.style.minHeight = chartHeight + 'px';
                    div.style.display = 'block';
                }
            });

            // ì°¨íŠ¸ ìƒì„± ì „ì— ì•½ê°„ì˜ ì§€ì—°ì„ ì£¼ì–´ DOMì´ ì™„ì „íˆ ì—…ë°ì´íŠ¸ë˜ë„ë¡ í•¨
            setTimeout(() => {
                // ëª¨ë“  ì°¨íŠ¸ë¥¼ ë™ì‹œì— ìƒì„±
                createChart('btc-chart', 'BTCUSDT', '#f7931a');
                createChart('eth-chart', 'ETHUSDT', '#627eea');
                createChart('sol-chart', 'NASDAQ:NDX', '#0066FF');
                
                // ì°¨íŠ¸ ë¡œë“œ í›„ ë²„íŠ¼ í™œì„±í™”
                setTimeout(() => {
                    enablePageInteractions();
                }, 2000);
            }, 1000);  // 1ì´ˆ ëŒ€ê¸° í›„ ì°¨íŠ¸ ìƒì„±
        });

        // ë ˆì´ì•„ì›ƒ ë³€ê²½ í•¨ìˆ˜
        function changeLayout(layoutNumber) {
            // ëª¨ë°”ì¼ì—ì„œëŠ” ë™ì‘í•˜ì§€ ì•ŠìŒ
            if (window.innerWidth < 769) return;

            // body í´ë˜ìŠ¤ ë³€ê²½
            document.body.className = 'layout-' + layoutNumber;

            // ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ë³€ê²½
            document.querySelectorAll('.layout-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // ì°¨íŠ¸ ë¦¬ë¡œë“œ (ë ˆì´ì•„ì›ƒ ë³€ê²½ í›„ ì¶©ë¶„í•œ ì‹œê°„ì„ ë‘” ë’¤ ë¦¬ë¡œë“œ)
            setTimeout(() => {
                location.reload();
            }, 500); // 0.5ì´ˆ í›„ ë¦¬ë¡œë“œ
        }

        // localStorageì— ë ˆì´ì•„ì›ƒ ì €ì¥
        function saveLayout(layoutNumber) {
            localStorage.setItem('chartLayout', layoutNumber);
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ë ˆì´ì•„ì›ƒ ë¶ˆëŸ¬ì˜¤ê¸°
        window.addEventListener('DOMContentLoaded', function() {
            // PCì—ì„œë§Œ ë ˆì´ì•„ì›ƒ ë³µì›
            if (window.innerWidth >= 769) {
                const savedLayout = localStorage.getItem('chartLayout') || '1';
                document.body.className = 'layout-' + savedLayout;

                // ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ì„¤ì •
                document.querySelectorAll('.layout-btn').forEach((btn, index) => {
                    btn.classList.remove('active');
                    if (btn.textContent === savedLayout) {
                        btn.classList.add('active');
                    }
                });
            }
        });

        // ë ˆì´ì•„ì›ƒ ë³€ê²½ ì‹œ ì €ì¥
        window.changeLayout = function(layoutNumber) {
            // ëª¨ë°”ì¼ì—ì„œëŠ” ë™ì‘í•˜ì§€ ì•ŠìŒ
            if (window.innerWidth < 769) return;

            saveLayout(layoutNumber);
            document.body.className = 'layout-' + layoutNumber;

            // ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ë³€ê²½
            document.querySelectorAll('.layout-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent === layoutNumber.toString()) {
                    btn.classList.add('active');
                }
            });

            // ë ˆì´ì•„ì›ƒ 1ë¡œ ë³€ê²½ ì‹œ ë†’ì´ ìë™ ê³„ì‚°
            if (layoutNumber === 1) {
                const autoHeight = Math.floor(window.innerHeight / 3);
                document.getElementById('heightInput').value = autoHeight;
                localStorage.setItem('layout1Height', autoHeight);  // ë†’ì´ ì €ì¥
            }

            // ì»¨íŠ¸ë¡¤ ìƒíƒœ ì—…ë°ì´íŠ¸
            updateHeightControlState();

            // ì°¨íŠ¸ ë¦¬ë¡œë“œ (ì¦‰ì‹œ)
            location.reload();
        };

        // ë†’ì´ ì¡°ì ˆ í•¨ìˆ˜
        function adjustHeight(change) {
            if (window.innerWidth < 769) return;

            const currentLayout = document.body.className;

            // ë ˆì´ì•„ì›ƒ 1ì—ì„œëŠ” ë†’ì´ ì¡°ì ˆ ë¹„í™œì„±í™” (ìë™ ê³„ì‚°)
            if (currentLayout === 'layout-1') {
                return;
            }

            const input = document.getElementById('heightInput');
            let currentHeight = parseInt(input.value) || 400;
            let newHeight = currentHeight + change;

            // ìµœì†Œ/ìµœëŒ€ê°’ ì œí•œ
            newHeight = Math.max(200, Math.min(800, newHeight));

            input.value = newHeight;
            applyChartHeight(newHeight);
            localStorage.setItem('chartHeight', newHeight);
        }

        // ì°¨íŠ¸ ë†’ì´ ì ìš©
        function applyChartHeight(height) {
            if (window.innerWidth < 769) return;

            const currentLayout = document.body.className;

            // ë ˆì´ì•„ì›ƒ 1ì€ ìœˆë„ìš° ë†’ì´ ê¸°ë°˜ìœ¼ë¡œ ìë™ ê³„ì‚°
            if (currentLayout === 'layout-1') {
                const autoHeight = Math.floor(window.innerHeight / 3);
                document.documentElement.style.setProperty('--chart-height', autoHeight + 'px');
                document.querySelectorAll('.chart-wrapper').forEach(wrapper => {
                    wrapper.style.height = autoHeight + 'px';
                });
                // ì…ë ¥ì°½ì— ê³„ì‚°ëœ ê°’ í‘œì‹œ
                document.getElementById('heightInput').value = autoHeight;
            } else {
                // ë ˆì´ì•„ì›ƒ 2, 3ì€ ì‚¬ìš©ì ì„¤ì •ê°’ ì‚¬ìš©
                document.documentElement.style.setProperty('--chart-height', height + 'px');
                document.querySelectorAll('.chart-wrapper').forEach(wrapper => {
                    wrapper.style.height = height + 'px';
                });

                if (currentLayout === 'layout-2' || currentLayout === 'layout-3') {
                    document.querySelector('.charts-container').style.height = height + 'px';
                }
            }
        }

        // ì…ë ¥ì°½ì—ì„œ ì§ì ‘ ê°’ ì…ë ¥ ì‹œ
        document.addEventListener('DOMContentLoaded', function() {
            const heightInput = document.getElementById('heightInput');
            if (heightInput) {
                heightInput.addEventListener('change', function() {
                    const currentLayout = document.body.className;

                    // ë ˆì´ì•„ì›ƒ 1ì—ì„œëŠ” ìˆ˜ì • ë¶ˆê°€
                    if (currentLayout === 'layout-1') {
                        const autoHeight = Math.floor(window.innerHeight / 3);
                        this.value = autoHeight;
                        return;
                    }

                    let newHeight = parseInt(this.value) || 400;
                    newHeight = Math.max(200, Math.min(800, newHeight));
                    this.value = newHeight;
                    applyChartHeight(newHeight);
                    localStorage.setItem('chartHeight', newHeight);
                });

                // ë ˆì´ì•„ì›ƒì— ë”°ë¼ ì…ë ¥ì°½ í™œì„±í™”/ë¹„í™œì„±í™”
                updateHeightControlState();
            }
        });

        // ë†’ì´ ì»¨íŠ¸ë¡¤ ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateHeightControlState() {
            const currentLayout = document.body.className;
            const heightInput = document.getElementById('heightInput');
            const heightButtons = document.querySelectorAll('.height-btn');

            if (currentLayout === 'layout-1') {
                // ë ˆì´ì•„ì›ƒ 1: ë¹„í™œì„±í™” (ì½ê¸° ì „ìš©)
                heightInput.style.opacity = '0.5';
                heightInput.style.cursor = 'not-allowed';
                heightInput.readOnly = true;
                heightButtons.forEach(btn => {
                    btn.style.opacity = '0.5';
                    btn.style.cursor = 'not-allowed';
                });
            } else {
                // ë ˆì´ì•„ì›ƒ 2, 3: í™œì„±í™”
                heightInput.style.opacity = '1';
                heightInput.style.cursor = 'text';
                heightInput.readOnly = false;
                heightButtons.forEach(btn => {
                    btn.style.opacity = '1';
                    btn.style.cursor = 'pointer';
                });
            }
        }

        // í™”ë©´ í¬ê¸° ë³€ê²½ ì‹œ ëŒ€ì‘
        let resizeTimeout;
        let allowResize = false;
        
        window.addEventListener('resize', function() {
            // ì°¨íŠ¸ê°€ ëª¨ë‘ ë¡œë“œë˜ì§€ ì•Šì•˜ìœ¼ë©´ ë¦¬ì‚¬ì´ì¦ˆ ë¬´ì‹œ
            if (!allowResize) {
                console.log('â¸ï¸ ì°¨íŠ¸ ë¡œë”© ì¤‘... ë¦¬ì‚¬ì´ì¦ˆ ì´ë²¤íŠ¸ ë¬´ì‹œ');
                return;
            }
            
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(function() {
                console.log('ğŸ”„ í™”ë©´ í¬ê¸° ë³€ê²½ ê°ì§€ - í˜ì´ì§€ ë¦¬ë¡œë“œ');
                location.reload();
            }, 1000);  // 1ì´ˆë¡œ ì¦ê°€
        });

        // ë¡œì»¬ í™˜ê²½ ì•ˆë‚´ ë©”ì‹œì§€
        if (window.location.hostname === 'localhost' || 
            window.location.hostname === '127.0.0.1' || 
            window.location.hostname === '') {
            
            console.log('ğŸ“Š ë¡œì»¬ í™˜ê²½ ê°ì§€');
            
            // TradingView ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ì•ˆë‚´
            const notice = document.createElement('div');
            notice.style.cssText = `
                position: fixed;
                bottom: 70px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(79, 172, 254, 0.9);
                color: white;
                padding: 10px 20px;
                border-radius: 5px;
                font-size: 12px;
                z-index: 10000;
            `;
            notice.innerHTML = `
                <div>ğŸ’¡ TradingView ì°¨íŠ¸ëŠ” ì‹¤ì‹œê°„ìœ¼ë¡œ ìë™ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤</div>
                <div style="font-size: 11px; margin-top: 5px; opacity: 0.9;">
                    â€¢ 1ë¶„ë´‰ ê¸°ì¤€ìœ¼ë¡œ í‹± ë°ì´í„°ê°€ ë°˜ì˜ë©ë‹ˆë‹¤
                    â€¢ WebSocketìœ¼ë¡œ ì‹¤ì‹œê°„ ê°€ê²©ì„ ë°›ì•„ì˜µë‹ˆë‹¤
                </div>
            `;
            document.body.appendChild(notice);
            
            // 5ì´ˆ í›„ ì•ˆë‚´ ë©”ì‹œì§€ í˜ì´ë“œì•„ì›ƒ
            setTimeout(() => {
                notice.style.transition = 'opacity 1s';
                notice.style.opacity = '0';
                setTimeout(() => notice.remove(), 1000);
            }, 5000);
        }
        
        // TradingView ìœ„ì ¯ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ì •ë³´
        // TradingViewëŠ” ìì²´ì ìœ¼ë¡œ WebSocketì„ í†µí•´ ì‹¤ì‹œê°„ ë°ì´í„°ë¥¼ ë°›ì•„ì˜µë‹ˆë‹¤.
        // interval: "1" ì„¤ì •ì€ 1ë¶„ë´‰ì„ ì˜ë¯¸í•˜ë©°, í‹± ë°ì´í„°ëŠ” ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.
        // ë” ë¹ ë¥¸ ì—…ë°ì´íŠ¸ë¥¼ ì›í•˜ë©´:
        // 1. intervalì„ "1S"ë¡œ ë³€ê²½ (1ì´ˆë´‰) - ì§€ì›ë˜ëŠ” ê²½ìš°
        // 2. ë˜ëŠ” Binance WebSocket APIë¥¼ ì§ì ‘ ì—°ê²°í•˜ì—¬ ì»¤ìŠ¤í…€ ì°¨íŠ¸ êµ¬í˜„
    </script>
</body>
</html>