<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fix Links Loading</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body {
            font-family: monospace;
            background: #1a1a1a;
            color: #fff;
            padding: 20px;
        }
        .code-block {
            background: #0a0a0a;
            border: 1px solid #333;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            overflow-x: auto;
        }
        .success { color: #4ade80; }
        .error { color: #f87171; }
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ Links Loading ìˆ˜ì • ê°€ì´ë“œ</h1>
    
    <div class="code-block">
        <h2>ë¬¸ì œ ë¶„ì„</h2>
        <p>index.htmlì—ì„œ ë§í¬ê°€ ë¡œë“œë˜ì§€ ì•ŠëŠ” ì´ìœ :</p>
        <ol>
            <li>LinksModuleì´ ë¡œë“œë˜ê¸° ì „ì— ì‹¤í–‰ë¨</li>
            <li>Supabase ì´ˆê¸°í™” íƒ€ì´ë° ë¬¸ì œ</li>
            <li>ë¹„ë™ê¸° ë¡œë”© ìˆœì„œ ë¬¸ì œ</li>
        </ol>
    </div>
    
    <div class="code-block">
        <h2>í•´ê²° ë°©ë²•</h2>
        <p>index.htmlì˜ ìŠ¤í¬ë¦½íŠ¸ ë¶€ë¶„ì„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•˜ì„¸ìš”:</p>
        <pre><code>// í˜ì´ì§€ ë¡œë“œì‹œ ë§í¬ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
window.addEventListener('DOMContentLoaded', async () => {
    console.log('=== ë§í¬ ë¡œë”© ì‹œì‘ ===');
    
    // 1. ì§ì ‘ Supabase ì´ˆê¸°í™” ë° ë¡œë“œ (ê°„ë‹¨í•œ ë°©ë²•)
    try {
        // Supabaseê°€ ë¡œë“œë  ë•Œê¹Œì§€ ëŒ€ê¸°
        let attempts = 0;
        while (!window.supabase && attempts < 10) {
            console.log('Supabase ëŒ€ê¸° ì¤‘...');
            await new Promise(resolve => setTimeout(resolve, 200));
            attempts++;
        }
        
        if (!window.supabase) {
            throw new Error('Supabase ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
        }
        
        // Supabase í´ë¼ì´ì–¸íŠ¸ ìƒì„±
        const SUPABASE_URL = 'https://ddfnxbkiewolgweivomv.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRkZm54YmtpZXdvbGd3ZWl2b212Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE2MzI3NzYsImV4cCI6MjA2NzIwODc3Nn0.YCS2UH6YWarPX3C2ryFUUQnFA-3er_ZQomf_mccjmD8';
        
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        console.log('âœ… Supabase ì´ˆê¸°í™” ì™„ë£Œ');
        
        // ë§í¬ ì¡°íšŒ
        const { data: links, error } = await supabase
            .from('links')
            .select('*')
            .order('position', { ascending: true });
        
        if (error) throw error;
        
        console.log(`âœ… ${links.length}ê°œ ë§í¬ ë¡œë“œ ì™„ë£Œ`);
        
        // ì¹´í…Œê³ ë¦¬ë³„ ë¶„ë¥˜
        const gptLinks = links.filter(link => link.category === 'gpt');
        const youtubeLinks = links.filter(link => link.category === 'youtube');
        const favoriteLinks = links.filter(link => link.category === 'favorite');
        
        // GPT ë§í¬ ë Œë”ë§
        const gptContainer = document.getElementById('gpt-links');
        if (gptContainer && gptLinks.length > 0) {
            gptContainer.innerHTML = gptLinks.map(link => `
                &lt;a href="${link.url}" target="_blank" class="link-card"&gt;
                    ${link.name}
                &lt;/a&gt;
            `).join('');
        }
        
        // YouTube ë§í¬ ë Œë”ë§
        const youtubeContainer = document.getElementById('youtube-links');
        if (youtubeContainer && youtubeLinks.length > 0) {
            youtubeContainer.innerHTML = youtubeLinks.map(link => `
                &lt;a href="${link.url}" target="_blank" class="link-card"&gt;
                    ${link.name}
                &lt;/a&gt;
            `).join('');
        }
        
        // Favorite ë§í¬ ë Œë”ë§
        const favoriteContainer = document.getElementById('favorite-links');
        if (favoriteContainer && favoriteLinks.length > 0) {
            favoriteContainer.innerHTML = favoriteLinks.map(link => `
                &lt;a href="${link.url}" target="_blank" class="link-card"&gt;
                    ${link.name}
                &lt;/a&gt;
            `).join('');
        }
        
    } catch (error) {
        console.error('âŒ ë§í¬ ë¡œë”© ì‹¤íŒ¨:', error);
    }
});</code></pre>
    </div>
    
    <div class="code-block">
        <h2>ë˜ëŠ” ê¸°ì¡´ í•¨ìˆ˜ ìˆ˜ì •</h2>
        <p>loadLinksFromSupabase í•¨ìˆ˜ ì‹œì‘ ë¶€ë¶„ ìˆ˜ì •:</p>
        <pre><code>async function loadLinksFromSupabase() {
    console.log('Loading links from Supabase...');
    
    // Supabase ë¼ì´ë¸ŒëŸ¬ë¦¬ ëŒ€ê¸°
    let attempts = 0;
    while (!window.supabase && attempts < 10) {
        console.log('Waiting for Supabase library...');
        await new Promise(resolve => setTimeout(resolve, 200));
        attempts++;
    }
    
    // ë‚˜ë¨¸ì§€ ì½”ë“œëŠ” ê·¸ëŒ€ë¡œ...
}</code></pre>
    </div>
    
    <button onclick="copyFix()">ìˆ˜ì • ì½”ë“œ ë³µì‚¬</button>
    <div id="copy-result"></div>

    <script>
        function copyFix() {
            const fixCode = `// Supabase ë¼ì´ë¸ŒëŸ¬ë¦¬ ëŒ€ê¸°
let attempts = 0;
while (!window.supabase && attempts < 10) {
    console.log('Waiting for Supabase library...');
    await new Promise(resolve => setTimeout(resolve, 200));
    attempts++;
}`;
            
            navigator.clipboard.writeText(fixCode).then(() => {
                document.getElementById('copy-result').innerHTML = '<p class="success">âœ… ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!</p>';
            });
        }
    </script>
</body>
</html>